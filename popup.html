<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebCheck Verifier</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <span class="logo-text">WebChecker</span>
      </div>
    </div>

    <!-- Main Card -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">
          <i class="fas fa-shield-alt"></i>
          Verify Content
        </div>
      </div>
      <div class="card-body">
        <div class="btn-group">
          <button id="checkButton" class="btn btn-primary">
            <i class="fas fa-check-circle"></i> Verify Page
          </button>
          <button id="verifySelectedButton" class="btn btn-outline-primary">
            <i class="fas fa-search"></i> Verify Selected Text
          </button>
          <button id="clearButton" class="btn btn-secondary">
            <i class="fas fa-undo"></i> Clear Results
          </button>
        </div>
        
        <div id="statusMessage" class="status info" style="display: none;"></div>
        
        <div id="verificationResults" class="verification-result" style="display: none;">
          <!-- Results will be populated here -->
        </div>
        
        <div id="finalScore" class="final-score">
          <div class="final-score-title">Page Verification Score</div>
          <div id="finalScoreValue" class="final-score-value">0</div>
          <div id="finalScoreExplanation" class="final-score-explanation"></div>
        </div>
      </div>
    </div>

    <!-- Sources Card -->
    <div class="card">
      <div class="card-header">
        <div class="card-title">
          <i class="fas fa-link"></i>
          Trusted Sources
        </div>
        <div class="toggle-container">
          <label class="toggle-switch">
            <input type="checkbox" id="sourcesToggle">
            <span class="slider"></span>
          </label>
          <span class="toggle-label">Manage Sources</span>
        </div>
      </div>
      <div class="card-body" id="sourcesSection" style="display: none;">
        <div class="sources-header">
          <span class="sources-title">Default Sources</span>
        </div>
        <div id="defaultSources" class="sources-list">
          <!-- Default sources will be populated here -->
        </div>
        
        <div class="sources-header">
          <span class="sources-title">Your Sources</span>
        </div>
        <div id="userSources" class="sources-list">
          <!-- User sources will be populated here -->
        </div>
        
        <div class="add-source">
          <input type="text" id="newSourceInput" class="form-control" placeholder="Add a new trusted source URL">
          <button id="addSourceButton" class="btn btn-primary">Add</button>
        </div>
      </div>
    </div>

    <!-- Toggle Developer Mode (petit, en bas) -->
    <div class="dev-toggle-container">
      <div class="toggle-container toggle-small">
        <label class="toggle-switch toggle-switch-small">
          <input type="checkbox" id="developerToggle">
          <span class="slider"></span>
        </label>
        <span class="toggle-label toggle-label-small">Developer Mode</span>
      </div>
    </div>

    <!-- Developer Tools Card (hidden by default) -->
    <div id="developerSection" class="card" style="display: none;">
      <div class="card-header">
        <div class="card-title">
          <i class="fas fa-wrench"></i>
          Developer Tools
        </div>
      </div>
      <div class="card-body">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-label">Pages Verified</div>
            <div id="pagesVerified" class="stat-value">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Paragraphs Checked</div>
            <div id="paragraphsChecked" class="stat-value">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">API Calls</div>
            <div id="apiCalls" class="stat-value">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">API Errors</div>
            <div id="apiErrors" class="stat-value">0</div>
          </div>
        </div>
        
        <div class="log-section">
          <h3>API Error Logs</h3>
          <div class="log-content" id="logContent">No logs available</div>
          <div class="btn-group">
            <button id="clearLogsButton" class="btn btn-secondary btn-sm">
              <i class="fas fa-trash"></i> Clear Logs
            </button>
            <button id="downloadLogsButton" class="btn btn-primary btn-sm">
              <i class="fas fa-download"></i> Download Logs
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Source Preview Container (hidden, shown when hovering on sources) -->
    <div id="sourcePreview" class="source-preview-container"></div>
  </div>

  <!-- Chargement de logger.js comme module -->
  <script src="logger.js" type="module"></script>
  <!-- Chargement de popup.js comme module -->
  <script src="popup.js" type="module"></script>
</body>
</html> 